(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[4],{118:function(t,e,n){},119:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n(18),o=n.n(a),s=n(14),i=n(71),u=n(145),l=n(55),b=n(56),j=n(69),d=n(68),O=n(21),g=n(9),h=n(139),f=n(141),p=n(142),x=n(143),m=n(51),v=function(t){return t.auth.token},y=function(t){return t.auth.user.name},C="/",S="/login",k="/register",A="/contacts",E=n(65),R=n.n(E),_=n(2),q={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#fff"},activeLink:{color:"#7fff61",fontSize:"16px"},title:{color:"#f8d017",fontSize:"20px",textTransform:"uppercase",padding:"0 4px",marginRight:"10px",boxShadow:"0 0 0 10px #f8d017",borderRadius:"5px"},box:{display:"flex",alignItems:"center"}},U=Object(s.b)((function(t){return{isAuthenticated:v(t)}}))((function(t){var e=t.isAuthenticated;return Object(_.jsxs)("div",{style:q.box,children:[Object(_.jsx)(x.a,{in:!0,appear:!0,timeout:500,classNames:R.a,unmountOnExit:!0,children:Object(_.jsx)("h2",{style:q.title,children:"Phonebook"})}),Object(_.jsxs)("nav",{children:[Object(_.jsx)(O.b,{to:C,exact:!0,style:q.link,activeStyle:q.activeLink,children:"Home"}),e&&Object(_.jsx)(O.b,{to:A,exact:!0,style:q.link,activeStyle:q.activeLink,children:"Contacts"})]})]})})),w=n(144),L={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},z=Object(s.b)((function(t){return{name:y(t),avatar:"https://cdn.iconscout.com/icon/free/png-256/avatar-380-456324.png"}}),{onLogout:m.a.logOut})((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(_.jsxs)("div",{style:L.container,children:[Object(_.jsx)("img",{src:e,alt:"",width:"32",style:L.avatar}),Object(_.jsxs)("span",{style:L.name,children:["Welcome, ",n]}),Object(_.jsx)(w.a,{variant:"contained",color:"secondary",disableElevation:!0,onClick:r,children:"Logout"})]})})),I=n(13),J=n(140),P=Object(h.a)((function(t){return{root:{"& > *":{margin:t.spacing(1)}}}})),F=Object(I.a)((function(t){return{root:{color:t.palette.getContrastText(J.a.A200),backgroundColor:J.a.A200,"&:hover":{backgroundColor:J.a.A700}}}}))(w.a),G=function(){var t=P();return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)(F,{variant:"contained",color:"primary",children:Object(_.jsx)(O.b,{to:"/register",exact:!0,children:"Register"})}),Object(_.jsx)(F,{variant:"contained",color:"primary",children:Object(_.jsx)(O.b,{to:"/login",exact:!0,children:"Login"})})]})},N=Object(h.a)((function(t){return{root:{display:"flex",justifyContent:"space-between",flexGrow:1,width:"80vw",marginLeft:"auto",marginRight:"auto"}}})),W=Object(s.b)((function(t){return{isAuthenticated:v(t)}}))((function(t){var e=t.isAuthenticated,n=N();return Object(_.jsx)(f.a,{position:"static",style:{background:"#009688"},children:Object(_.jsxs)(p.a,{className:n.root,children:[Object(_.jsx)(U,{}),e?Object(_.jsx)(z,{}):Object(_.jsx)(G,{})]})})})),B={container:{width:"90vw",marginLeft:"auto",marginRight:"auto",padding:"0 24px"}},D=function(t){var e=t.children;return Object(_.jsxs)("div",{style:B.container,children:[Object(_.jsx)(W,{}),e]})},H=n(25),M=n(44),T=Object(s.b)((function(t){return{isAuthenticated:v(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=Object(M.a)(t,["component","isAuthenticated"]);return Object(_.jsx)(g.b,Object(H.a)(Object(H.a)({},r),{},{render:function(t){return n?Object(_.jsx)(e,Object(H.a)({},t)):Object(_.jsx)(g.a,{to:"/"})}}))})),K=Object(s.b)((function(t){return{isAuthenticated:v(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.restricted,c=Object(M.a)(t,["component","isAuthenticated","restricted"]);return Object(_.jsx)(g.b,Object(H.a)(Object(H.a)({},c),{},{render:function(t){return n&&r?Object(_.jsx)(g.a,{to:"/tasks"}):Object(_.jsx)(e,Object(H.a)({},t))}}))})),Y=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,184))})),Q=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,188))})),V=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,185))})),X=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,186))})),Z=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(_.jsx)(O.a,{children:Object(_.jsx)(D,{children:Object(_.jsx)(c.Suspense,{fallback:Object(_.jsx)("h1",{children:"Loading..."}),children:Object(_.jsxs)(g.d,{children:[Object(_.jsx)(K,{path:C,exact:!0,component:Y,register:!1}),Object(_.jsx)(T,{path:A,component:Q,exact:!0}),Object(_.jsx)(K,{path:S,exact:!0,component:V,register:!0}),Object(_.jsx)(K,{path:k,exact:!0,component:X,register:!0}),Object(_.jsx)(g.a,{to:C})]})})})})}}]),n}(c.Component),$={onGetCurrentUser:m.a.getCurrentUser},tt=Object(s.b)(null,$)(Z),et=n(3),nt=n(24),rt=n(76),ct=n.n(rt),at=n(12),ot=n(78),st=n(11),it=n(33),ut=n(50),lt=n(77);n(116),n(117);ut.defaultModules.set(lt,{});var bt,jt,dt,Ot=Object(et.c)([],(r={},Object(at.a)(r,it.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(at.a)(r,it.a.addContactSuccess,(function(t,e){var n;return t.map((function(t){return t.name.toLowerCase()})).includes(e.payload.name.toLowerCase().trim())?(n=e.payload.name,Object(ut.error)({text:"".concat(n," is already in contacts!")}),t):[].concat(Object(ot.a)(t),[e.payload])})),Object(at.a)(r,it.a.removeContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),r)),gt=Object(et.c)("",Object(at.a)({},it.a.changeFilter,(function(t,e){return e.payload}))),ht=Object(st.c)({items:Ot,filter:gt}),ft=n(5),pt={name:null,email:null},xt=Object(et.c)(pt,(bt={},Object(at.a)(bt,ft.a.registerSuccess,(function(t,e){return e.payload.user})),Object(at.a)(bt,ft.a.loginSuccess,(function(t,e){return e.payload.user})),Object(at.a)(bt,ft.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(at.a)(bt,ft.a.logoutSuccess,(function(){return pt})),bt)),mt=Object(et.c)(null,(jt={},Object(at.a)(jt,ft.a.registerSuccess,(function(t,e){return e.payload.token})),Object(at.a)(jt,ft.a.loginSuccess,(function(t,e){return e.payload.token})),Object(at.a)(jt,ft.a.logoutSuccess,(function(){return null})),jt)),vt=Object(et.c)(null,(dt={},Object(at.a)(dt,ft.a.registerError,(function(t,e){return e.payload})),Object(at.a)(dt,ft.a.loginError,(function(t,e){return e.payload})),Object(at.a)(dt,ft.a.logoutError,(function(t,e){return e.payload})),Object(at.a)(dt,ft.a.getCurrentUserError,(function(t,e){return e.payload})),dt)),yt=Object(st.c)({user:xt,token:mt,error:vt}),Ct={key:"auth",storage:ct.a,whitelist:["token"]},St=Object(et.a)({reducer:{contacts:ht,auth:Object(nt.g)(Ct,yt)},middleware:Object(et.d)({serializableCheck:{ignoredActions:[nt.a,nt.f,nt.b,nt.c,nt.d,nt.e]}})}),kt=Object(nt.h)(St);n(118);o.a.render(Object(_.jsx)(s.a,{store:St,children:Object(_.jsx)(i.a,{loading:null,persistor:kt,children:Object(_.jsx)(u.a,{children:Object(_.jsx)(tt,{})})})}),document.getElementById("root"))},33:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("contacts/addRequest"),a=Object(r.b)("contacts/addSuccess"),o=Object(r.b)("contacts/addError"),s=Object(r.b)("contacts/fetchRequest"),i=Object(r.b)("contacts/fetchSuccess"),u=Object(r.b)("contacts/fetchError"),l=Object(r.b)("contacts/removeRequest"),b=Object(r.b)("contacts/removeSuccess"),j=Object(r.b)("contacts/removeError"),d=Object(r.b)("contacts/changeFilter");e.a={addContactRequest:c,addContactSuccess:a,addContactError:o,fetchContactsRequest:s,fetchContactsSuccess:i,fetchContactsError:u,removeContactRequest:l,removeContactSuccess:b,removeContactError:j,changeFilter:d}},5:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),s=Object(r.b)("auth/loginRequest"),i=Object(r.b)("auth/loginSuccess"),u=Object(r.b)("auth/loginError"),l=Object(r.b)("auth/logoutRequest"),b=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),g=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:l,logoutSuccess:b,logoutError:j,loginRequest:s,loginSuccess:i,loginError:u,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:g}},51:function(t,e,n){"use strict";var r=n(26),c=n.n(r),a=n(5);c.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var o=function(t){c.a.defaults.headers.common.Authorization="Bearer ".concat(t)},s=function(){c.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(e){e(a.a.registerRequest()),c.a.post("/users/signup",t).then((function(t){o(t.data.token),e(a.a.registerSuccess(t.data))})).catch((function(t){var n=t.message;return e(a.a.registerError(n))}))}},logOut:function(){return function(t){t(a.a.logoutRequest()),c.a.post("/users/logout").then((function(){s(),t(a.a.logoutSuccess())})).catch((function(e){var n=e.message;return t(a.a.logoutError(n))}))}},logIn:function(t){return function(e){e(a.a.loginRequest()),c.a.post("/users/login",t).then((function(t){o(t.data.token),e(a.a.loginSuccess(t.data))})).catch((function(t){var n=t.message;return e(a.a.loginError(n))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(o(n),t(a.a.getCurrentUserRequest()),c.a.get("/users/current").then((function(e){var n=e.data;return t(a.a.getCurrentUserSuccess(n))})).catch((function(t){var e=t.message;return a.a.getCurrentUserError(e)})))}}}},65:function(t,e,n){t.exports={box:"App_box__tUEaj",appear:"App_appear__vl5Uu",appearActive:"App_appearActive__3423g","filter-enter":"App_filter-enter__2JSq4","filter-enterActive":"App_filter-enterActive__2OcJj","filter-exit":"App_filter-exit__225IH","filter-exitActive":"App_filter-exitActive__cKYg_"}}},[[119,6,7]]]);
//# sourceMappingURL=main.ddb0023e.chunk.js.map